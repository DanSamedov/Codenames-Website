{% extends 'base.html' %} {% load static %} {% block styles %}
<link rel="stylesheet" href="{% static 'css/dist/game.css' %}" />
{% endblock %} {% block content %}
<main class="flex items-start justify-center">
  <div
    class="flex flex-col items-center flex-grow w-full max-w-6xl p-3 sm:p-4 pb-24 sm:pb-4"
  >
    <div class="text-center mb-2 sm:mb-3">
      <h2
        class="bebas-neue text-4xl sm:text-5xl md:text-6xl tracking-wider leading-none"
      >
        <span
          class="{% if current_player.team == 'Red' %}text-[var(--primary-color)]{% else %}text-[var(--secondary-color)]{% endif %}"
        >
          {{ current_player.username }}
        </span>
      </h2>
      <span class="text-base sm:text-lg text-[var(--text-light)]"
        >Game {{ game_obj.id }}</span
      >
    </div>

    <ul
      id="cards"
      class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 sm:gap-3 md:gap-4 w-full max-w-[1000px] px-1 sm:px-2 mt-2 select-none"
      role="list"
    >
      {% for card in cards_list %}
      <li
        id="card-{{ card.word }}"
        role="button"
        tabindex="0"
        aria-pressed="false"
        data-is-chosen="{% if card.word in guessed_cards %}guessed{% else %}false{% endif %}"
        onclick="card_choice(this.id)"
        class="bg-[var(--accent-color)] rounded shadow-lg flex items-center justify-center h-24 sm:h-28 md:h-32 px-2 sm:px-3 cursor-pointer hover:bg-gray-700 transition duration-300"
      >
        <span
          class="bebas-neue text-center leading-snug word-wrap text-lg sm:text-xl md:text-2xl font-medium"
        >
          {{ card.word }}
        </span>
      </li>
      {% endfor %}
    </ul>

    {% if current_player.leader %}
    <form
      id="hint-form"
      class="mt-6 hidden flex-col sm:flex-row sm:items-center sm:justify-center gap-3 md:gap-5 w-full max-w-[1000px] px-1 sm:px-2 mx-auto"
    >
      <div id="hint-word-input" class="flex flex-row gap-3 md:gap-5 w-full">
        <input
          type="text"
          id="hintWordInput"
          class="w-1/2 bg-[var(--accent-color)] border border-[var(--text-dark)] rounded px-4 py-2 text-2xl md:text-3xl bebas-neue placeholder:text-2xl md:placeholder:text-3xl focus:outline-none focus:ring-2 focus:ring-[var(--secondary-color)]"
          placeholder="Hint word"
          required
        />

        <input
          type="number"
          id="hintNumInput"
          class="w-1/2 bg-[var(--accent-color)] border border-[var(--text-dark)] rounded px-4 py-2 text-2xl md:text-3xl bebas-neue placeholder:text-2xl md:placeholder:text-3xl focus:outline-none focus:ring-2 focus:ring-[var(--secondary-color)]"
          placeholder="Words Number"
          required
        />
      </div>

      <button
        type="submit"
        name="hint-form-submit"
        class="w-full sm:w-1/3 text-[var(--text-light)] bebas-neue text-2xl md:text-3xl px-4 py-2 rounded transition duration-300 {% if current_player.team == 'Red' %} bg-[var(--primary-color)] hover:bg-red-700 {% else %} bg-[var(--secondary-color)] hover:bg-blue-700 {% endif %}"
      >
        Give the hint
      </button>
    </form>
    {% endif %}

    <div class="hint-container">
      <div
        id="hint-display"
        class="hint-display mt-4 sm:mt-6 w-full hidden flex-row items-center justify-center gap-3 sm:gap-4 bg-[var(--accent-color)] border border-[var(--text-dark)] rounded-md px-3 py-2 sm:px-4 sm:py-3 text-center shadow-md text-[var(--text-light)] bebas-neue leading-tight"
        aria-live="polite"
        role="status"
      >
        <div class="hint-section flex items-center">
          <span class="hint-label text-lg sm:text-xl opacity-80">Hint:</span>
          <span
            id="hint-word"
            class="hint-word text-2xl sm:text-3xl lg:text-4xl ml-2 text-[var(--highlight-color)]"
          ></span>
        </div>

        <div class="hint-separator inline opacity-60">|</div>

        <div class="words-section flex items-center">
          <span class="words-label text-lg sm:text-xl opacity-80">Words:</span>
          <span
            id="hint-number"
            class="hint-number text-2xl sm:text-3xl lg:text-4xl ml-2 text-[var(--highlight-color)]"
          ></span>
        </div>
      </div>
    </div>

    <div class="w-full flex justify-center mt-6 md:mt-8">
      <div
        id="timer-container"
        class="fixed sm:static bottom-3 inset-x-0 mx-auto w-[180px] sm:w-auto rounded-md px-4 py-2 border border-[var(--text-dark)] bg-[var(--accent-color)] bebas-neue text-[var(--light-text)] shadow-lg"
      >
        <div class="flex items-center justify-center gap-2">
          <span class="text-lg sm:text-xl opacity-80 text-[var(--text-light)]">
            Time left:
          </span>
          <span
            id="timer"
            class="text-2xl sm:text-3xl lg:text-4xl text-[var(--highlight-color)]"
          ></span>
        </div>
      </div>
    </div>
  </div>
</main>
{{ cards_list|json_script:"cards-data" }}
{{game_obj.id|json_script:"game-id-data" }} {% endblock %} {% block script %}
<script>
  window.gameConfig = {
    currentUser: "{{ current_player.username|escapejs }}",
    currentRole: '{{ current_player.leader|yesno:"True,False" }}',
    currentTeam: "{{ current_player.team|escapejs }}",
    gameId: "{{ game_obj.id }}",
    isLeader: '{{ current_player.leader|yesno:"true,false" }}',
  };
</script>

<script src="{% static 'js/game/utils/constants.js' %}"></script>
<script src="{% static 'js/game/core/config.js' %}"></script>
<script src="{% static 'js/game/core/gameState.js' %}"></script>
<script src="{% static 'js/game/core/storage.js' %}"></script>
<script src="{% static 'js/game/managers/websocketManager.js' %}"></script>
<script src="{% static 'js/game/managers/timerManager.js' %}"></script>
<script src="{% static 'js/game/managers/cardManager.js' %}"></script>
<script src="{% static 'js/game/managers/uiManager.js' %}"></script>
<script src="{% static 'js/game/managers/hintManager.js' %}"></script>
<script src="{% static 'js/game/handlers/messageHandler.js' %}"></script>
<script src="{% static 'js/game/main.js' %}"></script>
<script src="{% static 'js/game/game.js' %}"></script>
{% endblock %}
