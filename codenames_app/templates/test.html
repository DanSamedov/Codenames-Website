{% extends 'base.html' %} {% load static %} {% block styles %}
<link rel="stylesheet" href="{% static 'css/dist/room.css' %}" />
{% endblock %} {% block content %}
<main class="min-h-screen flex items-center justify-center p-4">
  <div class="flex flex-col items-center flex-grow max-w-6xl">
    <div class="text-center mb-12">
      <h2 class="bebas-neue text-5xl md:text-6xl tracking-wider">
        <span
          class="{% if current_player.team == Red %}text-[var(--primary-color)]{% else %}text-[var(--secondary-color)]{% endif %}"
        >
          {{ current_player.username }}
        </span>
      </h2>
      <span class="text-xl text-[var(--text-light)]">
        Game {{ game_obj.id }}
      </span>
    </div>
    <ul class="grid grid-cols-5 gap-4 p-4 w-full" id="cards">
      {% for card in cards_list %}
      <li
        class="bg-[var(--accent-color)] p-4 rounded-lg shadow-lg flex items-center justify-center h-28 md:h-32 cursor-pointer hover:bg-gray-700 transition duration-300"
        id="card-{{ card.word }}"
        data-is-chosen="{% if card.word in guessed_cards %}guessed{% else %}false{% endif %}"
        onclick="card_choice(this.id)"
      >
        <span class="text-xl md:text-2xl font-medium bebas-neue text-center">
          {{ card.word}}
        </span>
      </li>
      {% endfor %}
    </ul>
    <!-- <p id="hintDisplay"></p>
    <p id="timer"></p> -->
    <!-- Hint + Timer wrapper (keeps <p> tags) -->
    <div
      class="mt-6 w-full flex flex-col md:flex-row items-center justify-center gap-4"
    >
      <p
        id="hintDisplay"
        class="md:max-w-3xl bg-[var(--accent-color)] border border-[var(--text-dark)] rounded-lg px-5 py-4 text-center shadow-md text-[var(--text-light)] bebas-neue text-lg md:text-xl lg:text-2xl leading-tight break-words"
      ></p>

      <p
        id="timer"
        class="min-w-[140px] md:min-w-[160px] text-center rounded-lg px-5 py-3 border border-[var(--text-dark)] bg-[var(--accent-color)] shadow-md bebas-neue text-2xl md:text-3xl font-bold text-[var(--light-text)]"
      ></p>
    </div>

    {% if current_player.leader %}
    <form id="hint-form" class="mt-6 flex items-center space-x-3">
      <div id="hint-word-input" class="flex space-x-3">
        <label class="form-label hidden" for="hintWordInput"
          >Enter the hint</label
        >
        <input
          type="text"
          id="hintWordInput"
          class="bg-[var(--accent-color)] border border-[var(--text-dark)] rounded-lg py-2 px-4 w-48 focus:outline-none focus:ring-2 focus:ring-[var(--secondary-color)]"
          placeholder="Enter hint word"
          required
        />

        <label class="form-label hidden" for="hintNumInput"
          >Enter number of words</label
        >
        <input
          type="number"
          id="hintNumInput"
          class="bg-[var(--accent-color)] border border-[var(--text-dark)] rounded-lg py-2 px-4 w-48 focus:outline-none focus:ring-2 focus:ring-[var(--secondary-color)]"
          placeholder="Enter a number"
          required
        />
      </div>
      <button
        type="submit"
        name="hint-form-submit"
        class="bg-[var(--secondary-color)] hover:bg-blue-700 text-[var(--text-light)] font-bold py-2 px-6 rounded-lg transition duration-300"
      >
        Give the hint
      </button>
    </form>
    {% endif %}
  </div>
</main>
{{ cards_list|json_script:"cards-data" }}
{{game_obj.id|json_script:"game-id-data" }} {% endblock %} {% block script %}
<script>
  window.gameConfig = {
    currentUser: "{{ current_player.username|escapejs }}",
    currentRole: '{{ current_player.leader|yesno:"True,False" }}',
    currentTeam: "{{ current_player.team|escapejs }}",
    gameId: "{{ game_obj.id }}",
    isLeader: '{{ current_player.leader|yesno:"true,false" }}',
  };
</script>

<script src="{% static 'js/game/utils/constants.js' %}"></script>
<script src="{% static 'js/game/core/config.js' %}"></script>
<script src="{% static 'js/game/core/gameState.js' %}"></script>
<script src="{% static 'js/game/core/storage.js' %}"></script>
<script src="{% static 'js/game/managers/websocketManager.js' %}"></script>
<script src="{% static 'js/game/managers/timerManager.js' %}"></script>
<script src="{% static 'js/game/managers/cardManager.js' %}"></script>
<script src="{% static 'js/game/managers/uiManager.js' %}"></script>
<script src="{% static 'js/game/managers/hintManager.js' %}"></script>
<script src="{% static 'js/game/handlers/messageHandler.js' %}"></script>
<script src="{% static 'js/game/main.js' %}"></script>
<script src="{% static 'js/game/game.js' %}"></script>
{% endblock %}
